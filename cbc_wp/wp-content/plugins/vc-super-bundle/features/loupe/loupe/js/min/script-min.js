function simulateTouchEvents(t,e){var i=jQuery;return!!i(t)[0]&&(window.__touchTypes||(window.__touchTypes={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},window.__touchInputs={INPUT:1,TEXTAREA:1,SELECT:1,OPTION:1,input:1,textarea:1,select:1,option:1}),i(t).bind("touchstart touchmove touchend",function(t){var a=t.target===this;if(!e||a){var s=!a&&t.target.__ajqmeclk,o=t.originalEvent;if(s!==!0&&o.touches&&!(o.touches.length>1)&&window.__touchTypes[o.type]){var r=!a&&"boolean"!=typeof s&&i(t.target).data("events");if(s=!a&&(t.target.__ajqmeclk=!!r&&(r.click||r.mousedown||r.mouseup||r.mousemove)),!s&&!window.__touchInputs[t.target.tagName]){var n=o.changedTouches[0],h=document.createEvent("MouseEvent");h.initMouseEvent(window.__touchTypes[o.type],!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(h),o.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()}}}}),!0)}function release_loupe(t,e){""===t.handle?e.removeClass("draggable").removeClass("hoverable"):e.removeClass("active-handle").parent().removeClass("draggable")}!function(t){var e=t(window);t.fn.visible=function(t,i,a){if(!(this.length<1)){var s=this.length>1?this.eq(0):this,o=s.get(0),r=e.width(),n=e.height(),h=a?a:"both",g=i!==!0||o.offsetWidth*o.offsetHeight;if("function"==typeof o.getBoundingClientRect){var d=o.getBoundingClientRect(),u=d.top>=0&&d.top<n,l=d.bottom>0&&d.bottom<=n,f=d.left>=0&&d.left<r,p=d.right>0&&d.right<=r,c=t?u||l:u&&l,m=t?f||p:f&&p;if("both"===h)return g&&c&&m;if("vertical"===h)return g&&c;if("horizontal"===h)return g&&m}else{var v=e.scrollTop(),b=v+n,w=e.scrollLeft(),y=w+r,x=s.offset(),T=x.top,_=T+s.height(),C=x.left,I=C+s.width(),E=t===!0?_:T,z=t===!0?T:_,D=t===!0?I:C,k=t===!0?C:I;if("both"===h)return!!g&&z<=b&&E>=v&&k<=y&&D>=w;if("vertical"===h)return!!g&&z<=b&&E>=v;if("horizontal"===h)return!!g&&k<=y&&D>=w}}}}(jQuery),function(t){t.fn.magniDrags=function(e){e=t.extend({handle:"",cursor:"move"},e);var i;return i=""===e.handle?this:this.find(e.handle),i.css("cursor",e.cursor).off("mousedown dragstart").on("mousedown dragstart",function(i){var a;a=""===e.handle?t(this).addClass("draggable"):t(this).addClass("active-handle").parent().addClass("draggable");var s=a.css("z-index"),o=a.outerHeight(),r=a.outerWidth(),n=a.offset().top+o-i.pageY,h=a.offset().left+r-i.pageX;a.css("z-index",1e3).parents().off("mousemove drag").on("mousemove drag",function(e){t(".draggable").offset({top:e.pageY+n-o,left:e.pageX+h-r}).off("mouseup dragend").on("mouseup dragend",function(){t(this).removeClass("draggable").css("z-index",s)}),t(".draggable").trigger("remagnify").trigger("returnsoon")}),i.preventDefault()}).on("mouseup",release_loupe(e,t(this)))},t.fn.magniHover=function(e){e=t.extend({handle:"",cursor:"crosshair"},e);var i;i=""===e.handle?this:this.find(e.handle);var a=t(this).find(".gambit-loupe-glass"),s=a.css("z-index");return i.css("cursor","crosshair").off("mouseenter mousemove").on("mouseenter mousemove",function(e){if(i.inBoundary(e.pageX,e.pageY)){a.addClass("hoverable");var o=a.outerHeight(),r=a.outerWidth();a.css("z-index",1e3),t(".hoverable").offset({top:e.pageY-o/2,left:e.pageX-r/2}),t(".hoverable").trigger("remagnify").trigger("returnsoon"),e.preventDefault()}else t(".hoverable").trigger("remagnify").trigger("returnsoon"),a.removeClass("hoverable").css("z-index",s)})},t.fn.inBoundary=function(t,e){var i=this.offset(),a=i.left,s=i.top,o=this.height(),r=this.width(),n=a+r,h=s+o;return e<=h&&e>=s&&t<=n&&t>=a}}(jQuery),jQuery(document).ready(function(t){"undefined"==typeof t.easing.easeInOutQuad&&t.extend(t.easing,{easeInOutBack:function(t,e,i,a,s,o){return void 0===o&&(o=1.70158),(e/=s/2)<1?a/2*(e*e*(((o*=1.525)+1)*e-o))+i:a/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i}}),t(".gambit-loupe-bg").each(function(){t(this).css("height",parseInt(t(this).attr("data-orig-height"),10)*t(this).width()/parseInt(t(this).attr("data-orig-width"),10))}),t(window).resize(function(){t(".gambit-loupe-bg").each(function(){t(this).css("height","auto")}),t(".gambit-loupe-glass").each(function(){t(this).trigger("initpos")})}),t(".gambit-loupe-glass").on("initpos",function(){if(!t(this).parent().is(":visible")||0===t(this).parent().height()||0===t(this).parent().width()||!t(this).parent().visible(!0)){"undefined"!=typeof t(this).data("initpos-delayer")&&(clearTimeout(t(this).data("initpos-delayer")),t.removeData(t(this)[0],"initpos-delayer"));var e=t(this);return void t(this).data("initpos-delayer",setTimeout(function(){e.hide(),e.trigger("initpos")},250))}"undefined"!=typeof t(this).data("initpos-delayer")&&(t(this).show(),t.removeData(t(this)[0],"initpos-delayer"));var i=parseInt(t(this).attr("data-x"),10);isNaN(i)?i=t(this).width()/2:t(this).attr("data-x").indexOf("%")!==-1&&(i=t(this).siblings(".gambit-loupe-bg").width()*parseInt(t(this).attr("data-x"),10)/100),i-=t(this).width()/2,t(this).css("left",i),t(this).attr("data-orig-left",i);var a=t(this).siblings(".gambit-loupe-bg").height();if(0===a){var s=t(this).siblings(".gambit-loupe-bg");a=parseFloat(s.attr("data-orig-height"))/parseFloat(s.attr("data-orig-width"))*s.width()}var o=parseInt(t(this).attr("data-y"),10);isNaN(o)?o=a/2:t(this).attr("data-y").indexOf("%")!==-1&&(o=a*parseInt(t(this).attr("data-y"),10)/100),o-=t(this).height()/2,t(this).css("top",o),t(this).attr("data-orig-top",o),t(this).addClass("show"),t(this).trigger("remagnify")}),t(".gambit-loupe-glass").on("remagnify",function(){var e=t(this).parent(),i=t(this),a=i.siblings(".gambit-loupe-bg"),s=.01*parseInt(t(this).find(".gambit-loupe-magnified-image").attr("data-scaling"),10),o=parseFloat(a.attr("data-orig-width"))*s,r=parseFloat(i.css("left"));r+=i.width()/2,r/=e.width();var n=i.width()/2-o*r,h=parseFloat(a.attr("data-orig-height"))*s,g=parseFloat(i.css("top"));g+=i.height()/2,g/=h*e.width()/o;var d=i.height()/2-h*g;t(this).find(".gambit-loupe-magnified-image").css("backgroundPosition",n+"px "+d+"px").css("backgroundSize",o+"px "+h+"px")}),t(".gambit-loupe-glass").on("returnsoon",function(){"undefined"!=typeof t(this).data("return")&&(clearTimeout(t(this).data("return")),t(this).data("return",void 0));var e=t(this);t(this).data("return",setTimeout(function(){e.is(":visible")&&0!==e.height()&&0!==e.width()&&e.visible(!0)&&(e.hasClass("hoverable")||e.animate({top:e.attr("data-orig-top"),left:e.attr("data-orig-left")},{duration:1e3,easing:"easeInOutBack",progress:function(){e.trigger("remagnify"),e.is(":visible")&&0!==e.height()&&0!==e.width()&&e.visible(!0)||e.stop()}}))},4e3))}),t(".gambit-loupe-container").each(function(){var e=t(this).find(".gambit-loupe-glass");"draggable"===e.attr("data-movement")?(e.magniDrags(),simulateTouchEvents(e,!1)):"hover"===e.attr("data-movement")&&(t(this).magniHover(),simulateTouchEvents(t(this),!1)),e.trigger("initpos").trigger("remagnify")})});